{% extends "base.html" %}

{% block title %}–ü—Ä–æ—Ñ–∏–ª—å - X5Tech{% endblock %}

{% block content %}
<div class="profile-container">
    <div class="profile-header">
        <div class="profile-avatar">
            <div class="avatar-icon">üë§</div>
        </div>
        <div class="profile-info">
            <h1>{{ user.full_name }}</h1>
            <p class="profile-telegram">üîó {{ user.telegram_id }}</p>
            <p class="profile-email">üìß {{ user.email }}</p>
        </div>
    </div>

    <div class="profile-content">
        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="stats-section">
            <h2>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üèÜ</div>
                    <div class="stat-info">
                        <div class="stat-value">{{ total_points }}</div>
                        <div class="stat-label">–í—Å–µ–≥–æ –±–∞–ª–ª–æ–≤</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üéÆ</div>
                    <div class="stat-info">
                        <div class="stat-value">{{ games_played }}</div>
                        <div class="stat-label">–°—ã–≥—Ä–∞–Ω–æ –∏–≥—Ä</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚≠ê</div>
                    <div class="stat-info">
                        <div class="stat-value">
                            {% if games_played > 0 %}
                            {{ (total_points / games_played)|round(1) }}
                            {% else %}
                            0
                            {% endif %}
                        </div>
                        <div class="stat-label">–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üìà</div>
                    <div class="stat-info">
                        <div class="stat-value">
                            {% if user_rank %}
                            #{{ user_rank }}
                            {% else %}
                            -
                            {% endif %}
                        </div>
                        <div class="stat-label">–ú–µ—Å—Ç–æ –≤ —Ä–µ–π—Ç–∏–Ω–≥–µ</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
        <div class="info-section">
            <h2>‚ÑπÔ∏è –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
            <div class="info-grid">
                <div class="info-card">
                    <h3>üë§ –õ–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h3>
                    <div class="info-list">
                        <div class="info-item">
                            <span class="info-label">–§–ò–û:</span>
                            <span class="info-value">{{ user.full_name }}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Email:</span>
                            <span class="info-value">{{ user.email }}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">–¢–µ–ª–µ—Ñ–æ–Ω:</span>
                            <span class="info-value">{{ user.phone }}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Telegram:</span>
                            <span class="info-value">{{ user.telegram_id }}</span>
                        </div>
                    </div>
                </div>

                <div class="info-card">
                    <h3>üéì –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</h3>
                    <div class="info-list">
                        <div class="info-item">
                            <span class="info-label">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:</span>
                            <span class="info-value">
                                {% if user.study_direction %}
                                    {{ user.study_direction }}
                                {% else %}
                                    <span class="empty-field">–ù–µ —É–∫–∞–∑–∞–Ω–æ</span>
                                {% endif %}
                            </span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">–ò–Ω—Ç–µ—Ä–µ—Å—ã:</span>
                            <span class="info-value">
                                {% if user.interests %}
                                    {{ user.interests }}
                                {% else %}
                                    <span class="empty-field">–ù–µ —É–∫–∞–∑–∞–Ω—ã</span>
                                {% endif %}
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –î–µ–π—Å—Ç–≤–∏—è -->
        <div class="actions-section">
            <h2>üöÄ –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h2>
            <div class="actions-grid">
                <a href="/games" class="action-card">
                    <div class="action-icon">üéÆ</div>
                    <div class="action-content">
                        <h3>–ò–≥—Ä–∞—Ç—å</h3>
                        <p>–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –±–∞–ª–ª—ã</p>
                    </div>
                    <div class="action-arrow">‚Üí</div>
                </a>

                <a href="/leaderboard" class="action-card">
                    <div class="action-icon">üìä</div>
                    <div class="action-content">
                        <h3>–¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤</h3>
                        <p>–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–≤–æ–π —Ä–µ–π—Ç–∏–Ω–≥</p>
                    </div>
                    <div class="action-arrow">‚Üí</div>
                </a>

                <a href="/rewards" class="action-card">
                    <div class="action-icon">üèÜ</div>
                    <div class="action-content">
                        <h3>–ù–∞–≥—Ä–∞–¥—ã</h3>
                        <p>–û–±–º–µ–Ω—è—Ç—å –±–∞–ª–ª—ã –Ω–∞ –ø—Ä–∏–∑—ã</p>
                    </div>
                    <div class="action-arrow">‚Üí</div>
                </a>

                <a href="/internships" class="action-card">
                    <div class="action-icon">üíº</div>
                    <div class="action-content">
                        <h3>–°—Ç–∞–∂–∏—Ä–æ–≤–∫–∏</h3>
                        <p>–ö–∞—Ä—å–µ—Ä–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏</p>
                    </div>
                    <div class="action-arrow">‚Üí</div>
                </a>
            </div>
        </div>

        <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å -->
        <div class="progress-section">
            <h2>üéØ –ü—Ä–æ–≥—Ä–µ—Å—Å</h2>
            <div class="progress-cards">
                <div class="progress-card">
                    <h3>–£—Ä–æ–≤–µ–Ω—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: {% if games_played >= 10 %}100%{% else %}{{ (games_played / 10 * 100)|round }}%{% endif %}"></div>
                    </div>
                    <div class="progress-stats">
                        <span>{{ games_played }} –∏–∑ 10 –∏–≥—Ä</span>
                        <span>
                            {% if games_played >= 10 %}
                                üéâ –ú–∞–∫—Å–∏–º—É–º!
                            {% else %}
                                {{ 10 - games_played }} –¥–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
                            {% endif %}
                        </span>
                    </div>
                </div>

                <div class="progress-card">
                    <h3>–°–ª–µ–¥—É—é—â–∞—è –Ω–∞–≥—Ä–∞–¥–∞</h3>
                    <div class="reward-info">
                        <div class="reward-icon">üéÅ</div>
                        <div class="reward-details">
                            <h4>–§–∏—Ä–º–µ–Ω–Ω—ã–π –º–µ—Ä—á</h4>
                            <p>–æ—Ç 200 –±–∞–ª–ª–æ–≤</p>
                        </div>
                    </div>
                    <div class="progress-stats">
                        <span>{{ total_points }} –∏–∑ 200 –±–∞–ª–ª–æ–≤</span>
                        <span>
                            {% if total_points >= 200 %}
                                ‚úÖ –î–æ—Å—Ç—É–ø–Ω–æ
                            {% else %}
                                {{ 200 - total_points }} –±–∞–ª–ª–æ–≤ –æ—Å—Ç–∞–ª–æ—Å—å
                            {% endif %}
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}